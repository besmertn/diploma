<script>
    var api_key = '{{ config['ACCUWEATHER_API_KEY'] }}';
    var language = '{{ config['ACCUWEATHER_LANGUAGE'] }}';
    var basic_url = '{{ config['ACCUWEATHER_BASIC_URL'] }}';

    function get_location_key(lat, long) {
        const params = {apikey: api_key, q: lat + "," + long};
        $.ajax({
            method:'GET',
            url:basic_url + "locations/v1/cities/geoposition/search",
            data: params,
            dataType: 'json',
            async: false,
            success: function (data) {

            }
        })
            .done(function (data) {
                alert(data['Key']);
                return data['Key'];
            });
    }

    function get_1hour_forecast(lat, long) {
        var params = {apikey: api_key, lanuage0: language};
        var url = "forecasts/v1/hourly/1hour/" + get_location_key(lat, long);
        $.get(basic_url + url, params, function (data) {
            alert(data['Temperature']);
            return data['Temperature'];
        }, "json")
    }
</script>